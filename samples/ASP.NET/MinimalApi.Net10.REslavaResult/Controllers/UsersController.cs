using Microsoft.AspNetCore.Mvc;
using REslava.Result.AdvancedPatterns;  // ðŸ†• v1.10.0: REslava.Result's internal OneOf
using REslava.Result;
using MinimalApi.Net10.REslavaResult.Models;
// using Generated.ResultExtensions;  // Auto-generated by v1.10.0 - temporarily disabled
using Generated.OneOfExtensions;  // Auto-generated by v1.10.0

namespace MinimalApi.Net10.REslavaResult.Controllers;

// Temporarily commented out due to missing ResultExtensions
/*
[ApiController]
[Route("api/[controller]")]
public class UsersController : ControllerBase
{
    private static readonly List<User> _users = new();

    static UsersController()
    {
        // Add test data for integration tests
        _users.Add(new User { Id = 1, Name = "Test User", Email = "test@example.com", CreatedAt = DateTime.UtcNow });
    }

    [HttpGet("{id}")]
    public Result<User> GetUser(int id)
    {
        var user = _users.FirstOrDefault(u => u.Id == id);
        return user != null ? user : Result<User>.Fail($"User with ID {id} not found");
    }

    [HttpPost]
    public Result<User> CreateUser([FromBody] CreateUserRequest request)
    {
        if (string.IsNullOrEmpty(request.Name))
            return Result<User>.Fail("Name is required");

        if (string.IsNullOrEmpty(request.Email))
            return Result<User>.Fail("Email is required");

        var user = new User
        {
            Id = _users.Count + 1,
            Name = request.Name,
            Email = request.Email,
            CreatedAt = DateTime.UtcNow
        };

        _users.Add(user);
        return user;
    }
}
*/
